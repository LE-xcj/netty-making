## wheel-making 重复制造轮子

#### · 一、基于Netty实现的在线聊天系统  

 ####  介绍
  一共包含三个模块
  1、chat-base-module:模块整个系统的基础模块，里面包含自定义的通讯协议、常数以及协议编码和解码器  
  2、chat-client:作为客户端（可以是桌面端也可以是网页端,根据需要自行扩展)  
  3、chat-server:作为服务端（提供群聊和单聊功能）
  
  #### 特色：
  1、提供点对点聊天、未读历史消息查询、桌面端与网页端兼容通讯。
  2、桌面端使用自定义通讯协议，网页端使用websocket协议；服务器分别绑定两个端口来监听。
  3、自定义通讯协议解决粘包和拆包问题，使用策略模式解决不同协议之间的传送方式问题
  4、chatServer使用单例模式，懒汉加载，使用dubbo-check防止高并发情况下重复创建
  5、mapper代理对象采用间接方式注入
  6、加入身份验证，模拟token。预留模板，可以动态修改验证方式
  
  #### 不足：
  1、代码还不够精简，可以进行重构
  2、只有网页端有界面，桌面端可以自行添加（预留ChatView类来进行界面的添加）
  3、还没有实现文件传送..（不过应该差不多）
  4、因为第一次使用Netty，所以在项目结构以及包的分类还是有些混乱
  
#### · 二、基于Netty实现的心跳检测系统

  #### 介绍
  一共三个模块
  1、chat-base-module：基础模块，包含：告警规则、加密/解密规则、sigar和数据压缩工具类
  2、heartbeat-detect：心跳检测系统，负责收集各个服务系统的“心跳信息”，例如：主机和进程的使用状况细腻，CPU、内存、网络等等......
  3、web-server：模拟web服务器，其中有定时任务，每隔5s发送一次“心跳包”到“心跳检测服务器”
  
  #### 特色
  1、数据传送进行压缩和选择性加密、解密
  2、定义了抽象加密和解密规则，可以自行添加自定义具体的加密与解密规则
  3、使用sigar系统信息获取插件库并封装工具类，以及定义SystemInfo和Process作为主机和进程的信息载体，主机与进程的一对多关系
  4、使用GZIP进行数据压缩，可以传入压缩和解压规则（默认不加密和不解密）。一定要保证操作对称性，这里我是：加密------》 压缩；解压-----》 解密
  5、定义了Alarm告警接口，可以根据具体业务定义相应的告警规则。在遍历主机信息就触发告警检测，根据传入的具体规则运行。这里我是以“内存使用率高于50%”就触发告警，具体还有什么短信、邮件通知就自行实现了，模板已经给了。
  6、使用分隔符解决拆包和粘包问题，一定要注意压缩流与StringDecoder在字节内容上的区别（否则就会出现压缩数据格式不满足GZIP的要求）这里我是不使用Netty的StringDecoder，并且在不能对分隔符进行压缩（否则，在接收时无法将分隔符还原就会作为数据内容，因为Netty在接收数据时就会寻找分隔符，然后切割并将数据返回到channelRead中，所以不能无法在那时候对分隔符进行解压）
  7、web服务器那边使用Schedule线程池，定时（每隔5秒）发送心跳包给“心跳检测系统”

#### 不足之处
1、没有界面，不过已经预留InfoView来扩展界面的实现
2、没能阅读完sigar的API，就获取一些必要的参考信息（cpu、内存、网络地址以及进程的一些信息）
3、没有做身份验证的模块，不过一般“检测系统”都是内网使用“，所以在路由那一块就降低了攻击风险和减少不信任系统连接的问题